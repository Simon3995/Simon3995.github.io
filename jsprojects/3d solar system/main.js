const mercuryTexture=new THREE.TextureLoader().load("./textures/mercury.jpg"),venusTexture=new THREE.TextureLoader().load("./textures/venus.jpg"),earthTexture=new THREE.TextureLoader().load("./textures/earth.jpg"),moonTexture=new THREE.TextureLoader().load("./textures/moon.jpg"),marsTexture=new THREE.TextureLoader().load("./textures/mars.jpg"),jupiterTexture=new THREE.TextureLoader().load("./textures/jupiter.jpg"),saturnTexture=new THREE.TextureLoader().load("./textures/saturn.jpg"),uranusTexture=new THREE.TextureLoader().load("./textures/uranus.jpg"),neptuneTexture=new THREE.TextureLoader().load("./textures/neptune.jpg"),sunTexture=new THREE.TextureLoader().load("./textures/sun.jpg"),create_body=function(e,t,o,n){let r=new THREE.SphereGeometry(e,40,20),u=new THREE.MeshPhongMaterial({map:t}),$=new THREE.Mesh(r,u),i=new THREE.Quaternion().setFromAxisAngle(o,n);return $.setRotationFromQuaternion(i),scene.add($),$},updateVelocities=function(){for(let e of Bodies)for(let t of Bodies){if(e.name==t.name)continue;let o=G*e.mass*t.mass/dist_3d(e.body.position,t.body.position)**2/e.mass,n=t.body.position.x-e.body.position.x,r=t.body.position.y-e.body.position.y,u=t.body.position.z-e.body.position.z,$=n/(Math.sqrt(n**2+r**2+u**2)/o),i=r/(Math.sqrt(n**2+r**2+u**2)/o),s=u/(Math.sqrt(n**2+r**2+u**2)/o);e.velx+=$,e.vely+=i,e.velz+=s}},createOrbits=function(e){let t=new THREE.BufferGeometry().setFromPoints(e),o=new THREE.LineBasicMaterial({color:8947848,linewidth:1,linecap:"round",linejoin:"round"}),n=new THREE.Line(t,o);scene.add(n)},getBody=function(e){for(body of Bodies)if(body.name==e)return body},updatePositions=function(){for(let e of Bodies)e.body.position.x+=330*e.velx,e.body.position.y+=330*e.vely,e.body.position.z+=330*e.velz;camera.position.x+=330*Bodies[focus].velx,camera.position.y+=330*Bodies[focus].vely,camera.position.z+=330*Bodies[focus].velz},updateRotations=function(){getBody("Sun").body.rotation.y-=50*4e-6,getBody("Mercury").body.rotation.y-=432e-7,getBody("Venus").body.rotation.y-=26e-6,getBody("Earth").body.rotation.y-=1574*4e-6,getBody("Mars").body.rotation.y-=866*4e-6,getBody("Jupiter").body.rotation.y-=.182332,getBody("Saturn").body.rotation.y-=.14736,getBody("Uranus").body.rotation.y-=.059176,getBody("Neptune").body.rotation.y-=.038876},dist_3d=function(e,t){return Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2+(e.z-t.z)**2)},pause=function(){paused=!paused},switchFocus=function(){focus=(focus+1)%Bodies.length,controls.target=Bodies[focus].body.position},doubleSun=function(){getBody("Sun").mass*=2},update=function(){if(!paused){for(let e=0;e<100;e++)updateVelocities(),updatePositions(),updateRotations();for(let t of Bodies){for(t.bodyPoints.push(new THREE.Vector3(t.body.position.x,t.body.position.y,t.body.position.z));t.bodyPoints.length>1e3;)t.bodyPoints=t.bodyPoints.slice(1);for(obj of scene.children)scene.children.length>50&&"Line"==obj.type&&(scene.remove(obj),obj.geometry.dispose());createOrbits(t.bodyPoints)}}renderer.render(scene,camera),controls.update(),requestAnimationFrame(update)},init=void(scene.add(new THREE.AmbientLight(16777215,1.2)),Bodies.push(new Body(name="Sun",radius=5e10,dist=0,angle=0,mass=1989e30,vel=[0,0,0],texture=sunTexture,bodyPoints=[],new THREE.Vector3(1,0,0),7.25*Math.PI/180)),Bodies.push(new Body(name="Mercury",radius=1e10,dist=579e8,angle=0,mass=3285e20,vel=[0,0,47900],texture=mercuryTexture,bodyPoints=[],new THREE.Vector3(1,0,0),.01*Math.PI/180)),Bodies.push(new Body(name="Venus",radius=1e10,dist=1082e8,angle=0,mass=4867e21,vel=[0,0,35e3],texture=venusTexture,bodyPoints=[],new THREE.Vector3(1,0,0),2.64*Math.PI/180)),Bodies.push(new Body(name="Moon",radius=4e9,dist=149600384400,angle=0,mass=7348e19,vel=[0,0,30822],texture=moonTexture,bodyPoints=[],new THREE.Vector3(1,0,0),1.54*Math.PI/180)),Bodies.push(new Body(name="Earth",radius=1e10,dist=1496e8,angle=0,mass=5972e21,vel=[0,0,29800],texture=earthTexture,bodyPoints=[],new THREE.Vector3(1,0,0),23.44*Math.PI/180)),Bodies.push(new Body(name="Mars",radius=1e10,dist=2279e8,angle=0,mass=639e21,vel=[0,0,24100],texture=marsTexture,bodyPoints=[],new THREE.Vector3(1,0,0),25.19*Math.PI/180)),Bodies.push(new Body(name="Jupiter",radius=1e10,dist=7786e8,angle=0,mass=1898e24,vel=[0,0,13100],texture=jupiterTexture,bodyPoints=[],new THREE.Vector3(1,0,0),3.12*Math.PI/180)),Bodies.push(new Body(name="Saturn",radius=1e10,dist=14335e8,angle=0,mass=5683e23,vel=[0,0,9700],texture=saturnTexture,bodyPoints=[],new THREE.Vector3(1,0,0),26.73*Math.PI/180)),Bodies.push(new Body(name="Uranus",radius=1e10,dist=28725e8,angle=0,mass=8681e22,vel=[0,0,8e3],texture=uranusTexture,bodyPoints=[],new THREE.Vector3(1,0,0),82.23*Math.PI/180)),Bodies.push(new Body(name="Neptune",radius=1e10,dist=44951e8,angle=0,mass=1024e23,vel=[0,0,5400],texture=neptuneTexture,bodyPoints=[],new THREE.Vector3(1,0,0),28.33*Math.PI/180)),Bodies.push(new Body(name="Halley",radius=1e9,dist=88e9,angle=0,mass=22e13,vel=[0,0,54550],texture=moonTexture,bodyPoints=[],new THREE.Vector3(0,0,0),Math.PI)),update());